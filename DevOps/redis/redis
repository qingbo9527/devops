### Redis

1. 基本概念：内存键值数据库，经常用于缓存、秒杀、分布式锁等场景
2. redis如何避免数据丢失？因为它是把后端数据库的中数据存储在内存中，然后直接从内存中读取数据，响应速度非常快。但问题是：一旦服务器宕机，内存中的数据将全部丢失。因此ridis有两大持久化机制：AOF日志和RDB快照
   * AOF日志：写后日志，它是在命令执行后才记录日志，所以不会阻塞当前的写操作。
     * 三种写回策略
       * Always，同步写回
       * Everysec，每秒写回
       * No，操作系统控制的写回
     * AOF重写机制：为解决AOF 文件过大带来的性能问题
     * 疑问：AOF重写会拷贝一份完整的内存数据，这个会导致内存占用直接翻倍吗？
     * 答疑：不会一次性拷贝所有内存数据，而且采用**写时复制机制**来做
     * 写时复制机制：（Copy-on-write，简称COW）是一种计算机程序设计领域的优化策略。其核心思想是，如果有多个调用者（callers）同时要求相同资源（如内存或磁盘上的数据存储），他们会共同获取相同的指针指向相同的资源，直到某个调用者试图修改资源的内容时，系统才会真正复制一份专用副本（private copy）给该调用者，而其他调用者所见到的最初的资源仍然保持不变。这过程对其他的调用者都是透明的（transparently）。此作法主要的优点是如果调用者没有修改该资源，就不会有副本（private copy）被创建，因此多个调用者只是读取操作时可以共享同一份资源。

